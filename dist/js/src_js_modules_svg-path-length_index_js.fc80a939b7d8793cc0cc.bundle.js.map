{"version":3,"file":"js/src_js_modules_svg-path-length_index_js.fc80a939b7d8793cc0cc.bundle.js","mappings":"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","sources":["webpack://samuelpasquier/./src/js/modules/module/Module.js","webpack://samuelpasquier/./src/js/modules/svg-path-length/SvgPathLength.js","webpack://samuelpasquier/./src/js/modules/svg-path-length/index.js","webpack://samuelpasquier/./src/js/modules/svg-path-length/factory.js","webpack://samuelpasquier/./src/js/utils/resize.js","webpack://samuelpasquier/./src/js/utils/throttle.js"],"sourcesContent":["class Module {\n  init() {}\n\n  // called during Barba's afterEnter hook.\n  start() {}\n\n  // called during Barba's beforeLeave hook.\n  stop() {}\n\n  // called during Barba's afterLeave hook.\n  destroy() {}\n\n  // getter - setter\n  get name() {\n    return null;\n  }\n}\n\nexport default Module;\n","import { $$ } from '@utils/dom';\nimport ResizeOrientation from '@utils/resize';\n\n\nclass SvgPathLength {\n  constructor(el, emitter) {\n    this.el = el;\n    this.emitter = emitter;\n    this.paths = [ ...$$('path', this.el) ];\n\n    this._onResize = this._onResize.bind(this);\n\n    this.init();\n  }\n\n  init() {\n    if( this.paths.length > 0 ) {\n      this._ro = ResizeOrientation(this._onResize);\n      this._ro.run();\n    }\n\n    this._bindEvents();\n  }\n  destroy() {\n    this._unbindEvents();\n\n    if( this._ro ) this._ro.dispose();\n\n    this.el = null;\n    this.emitter = null;\n    this.paths = null;\n\n    this._ro = null;\n  }\n\n  _bindEvents() {\n    if( this._ro ) this._ro.on();\n  }\n  _unbindEvents() {\n    if( this._ro ) this._ro.off();\n  }\n\n  _onResize() {\n    this.paths.forEach(path => path.style.setProperty('--length', `${path.getTotalLength()}px`));\n  }\n}\n\nexport default SvgPathLength;\n","import Factory from \"./factory\";\n\nexport const instance = new Factory();\n\nexport default { instance };\n","import { $$ } from \"@utils/dom\";\n\nimport Module from \"../module/Module\";\nimport SvgPathLength from \"./SvgPathLength\";\n\nexport const SELECTOR = `[data-svg-path-length]`;\n\nclass Factory extends Module {\n  constructor(init = false) {\n    super();\n\n    this.initialized = false;\n    this.items = null;\n\n    init ? this.init() : null;\n  }\n\n  get name() {\n    return \"SvgPathLength\";\n  }\n\n  init() {\n    // set initialized\n    this.initialized = true;\n    this.items = [...$$(SELECTOR)].map(el => new SvgPathLength(el, this.emitter));\n  }\n  destroy() {\n    if (this.items) this.items.forEach(el => el.destroy());\n\n    this.initialized = false;\n    this.items = null;\n  }\n}\n\nexport default Factory;\n","/*\n\n──────────────────────────────────────────\n──────────────────────────────────────────\nRESIZE & ORIENTATION\n──────────────────────────────────────────\n──────────────────────────────────────────\n\nconst ro = ResizeOrientation(resize, 100, true);\n\nro.on();  // start listening to window's resize & orientation change events\nro.off(); // stop listening to window's resize & orientation change events\nro.run(); // execute object callback\n\nfunction resize(event) {\n  // do something\n}\n\n*/\n\nimport { on, off } from \"./listener\";\nimport Throttle from \"./throttle\";\n\nconst ResizeOrientation = (cb, delay = 200, onlyAtEnd = false) => {\n  // PRIVATE API\n  const gRaf = () => {\n    if (!tick) {\n      requestAnimationFrame(_run);\n      tick = true;\n    }\n  };\n  const getThrottle = (e) => {\n    event = e;\n    throttle.init();\n  };\n\n  let tick, event;\n  const throttle = Throttle({\n    cb: gRaf,\n    delay,\n    onlyAtEnd\n  });\n\n  // PUBLIC API\n  const _on = () => {\n    on(window, \"orientationchange\", getThrottle);\n    on(window, \"resize\", getThrottle);\n  };\n  const _off = () => {\n    off(window, \"orientationchange\", getThrottle);\n    off(window, \"resize\", getThrottle);\n  };\n  const _run = () => {\n    cb(event);\n    tick = false;\n  };\n  const _dispose = () => {\n    throttle.dispose();\n    tick = true;\n  };\n\n  const ctx = {\n    dispose: _dispose,\n    on: _on,\n    off: _off,\n    run: _run\n  };\n\n  return ctx;\n};\n\nexport default ResizeOrientation;\n","/*\n\n──────────────────────────────────────────\n──────────────────────────────────────────\nTHROTTLE\n──────────────────────────────────────────\n──────────────────────────────────────────\n\n►►►  firstTime for window resizer\n\nconst throttle = new S.Throttle({\n    cb: callback,\n    delay: 200\n    onlyAtEnd: true\n})\n\nthrottle.init()\n\n*/\n\nconst Throttle = (options = { delay: 200, onlyAtEnd: false }) => {\n  const { delay, cb, onlyAtEnd } = options;\n  let last, timer;\n\n  const init = () => {\n    let firstTime = true,\n      now = Date.now();\n\n    if ((last && now < last + delay) || firstTime) {\n      firstTime = false;\n      clearTimeout(timer);\n\n      timer = setTimeout(function () {\n        last = now;\n        cb();\n      }, delay);\n    } else {\n      last = now;\n\n      if (!onlyAtEnd) {\n        firstTime = false;\n        cb();\n      }\n    }\n  };\n  const dispose = () => {\n    if (timer) clearTimeout(timer);\n    timer = null;\n  };\n\n  const ctx = {\n    init,\n    dispose\n  };\n\n  return ctx;\n};\n\nexport default Throttle;\n"],"names":["Module","init","start","stop","destroy","name","SvgPathLength","el","emitter","this","paths","$$","_onResize","bind","length","_ro","ResizeOrientation","run","_bindEvents","_unbindEvents","dispose","on","off","forEach","path","style","setProperty","getTotalLength","instance","Factory","initialized","items","map","cb","tick","event","delay","onlyAtEnd","gRaf","requestAnimationFrame","_run","getThrottle","e","throttle","Throttle","_on","window","_off","_dispose","ctx","last","timer","options","firstTime","now","Date","clearTimeout","setTimeout"],"sourceRoot":""}