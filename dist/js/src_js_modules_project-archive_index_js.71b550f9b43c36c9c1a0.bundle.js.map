{"version":3,"file":"js/src_js_modules_project-archive_index_js.71b550f9b43c36c9c1a0.bundle.js","mappings":"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","sources":["webpack://samuelpasquier/./src/js/modules/module/Module.js","webpack://samuelpasquier/./src/js/modules/project-archive/ProjectArchive.js","webpack://samuelpasquier/./src/js/modules/project-archive/index.js","webpack://samuelpasquier/./src/js/modules/project-archive/factory.js","webpack://samuelpasquier/./src/js/utils/throttle.js"],"sourcesContent":["class Module {\n  init() {}\n\n  // called during Barba's afterEnter hook.\n  start() {}\n\n  // called during Barba's beforeLeave hook.\n  stop() {}\n\n  // called during Barba's afterLeave hook.\n  destroy() {}\n\n  // getter - setter\n  get name() {\n    return null;\n  }\n}\n\nexport default Module;\n","import { $, $$ } from \"@utils/dom\";\nimport Throttle from \"@utils/throttle\";\nimport { on, off } from \"@utils/listener\";\n\nconst CLASSNAME_OPENED = `--opened`;\n\nclass ProjectArchive {\n  constructor(el, emitter) {\n    this.el = el;\n    this.emitter = emitter;\n\n    this.projects = [...$$('.project-archives__project', this.el)];\n\n    this._enterProjects = this._enterProjects.bind(this);\n    this._leaveProjects = this._leaveProjects.bind(this);\n    this._imageSwap = this._imageSwap.bind(this);\n\n\n    this.currentProject = null;\n\n    this.init();\n  }\n\n  init() {\n    this.imgThrottler = new Throttle({cb: this._imageSwap, delay: 250, onlyAtEnd: false});\n  }\n  destroy() {\n\n    this.el = null;\n    this.emitter = null;\n\n    this.projects = null;\n\n    this.currentProject = null;\n\n    if(this.imgThrottler) this.imgThrottler.dispose();\n    this.imgThrottler = null;\n\n    this._enterPreviews = null;\n    this._leavePreviews = null;\n    this._imageSwap = null;\n  }\n\n  start() { this._bindEvents(); }\n  stop() { this._unbindEvents(); }\n\n  _imageSwap(){\n    this.projects.forEach((_el) => {\n      if (_el == this.currentProject) {\n        _el.classList.add(CLASSNAME_OPENED);\n      } else {\n        _el.classList.remove(CLASSNAME_OPENED);\n      }\n    });\n  }\n\n  _enterProjects(e){\n    this.currentProject = e.currentTarget;\n\n    this.imgThrottler.init();\n  }\n\n  _leaveProjects(e){\n    this.currentProject = null;\n    \n    this.imgThrottler.init();\n  }\n\n  _bindEvents() {\n    if(this.projects) on(this.projects, 'mouseenter', this._enterProjects);\n    if(this.projects) on(this.projects, 'mouseleave', this._leaveProjects);\n  }\n\n  _unbindEvents() {\n    if(this.projects) off(this.projects, 'mouseenter', this._enterProjects);\n    if(this.projects) off(this.projects, 'mouseleave', this._leaveProjects);\n  }\n}\n\nexport default ProjectArchive;\n","import Factory from \"./factory\";\n\nexport const instance = new Factory();\n\nexport default { instance };\n","import { $$ } from \"@utils/dom\";\n\nimport Module from \"../module/Module\";\nimport ProjectArchive from \"./ProjectArchive\";\n\nexport const SELECTOR = `[data-project-archive]`;\n\nclass Factory extends Module {\n  constructor(init = false) {\n    super();\n\n    this.initialized = false;\n    this.items = null;\n\n    init ? this.init() : null;\n  }\n\n  get name() {\n    return \"ProjectArchive\";\n  }\n\n  init() {\n    // set initialized\n    this.initialized = true;\n    this.items = [...$$(SELECTOR)].map(el => new ProjectArchive(el, this.emitter));\n  }\n  destroy() {\n    if (this.items) this.items.forEach(el => el.destroy());\n\n    this.initialized = false;\n    this.items = null;\n  }\n\n  start() {\n    if (this.items) this.items.forEach(el => el.start());\n  }\n  stop() {\n    if (this.items) this.items.forEach(el => el.stop());\n  }\n}\n\nexport default Factory;\n","/*\n\n──────────────────────────────────────────\n──────────────────────────────────────────\nTHROTTLE\n──────────────────────────────────────────\n──────────────────────────────────────────\n\n►►►  firstTime for window resizer\n\nconst throttle = new S.Throttle({\n    cb: callback,\n    delay: 200\n    onlyAtEnd: true\n})\n\nthrottle.init()\n\n*/\n\nconst Throttle = (options = { delay: 200, onlyAtEnd: false }) => {\n  const { delay, cb, onlyAtEnd } = options;\n  let last, timer;\n\n  const init = () => {\n    let firstTime = true,\n      now = Date.now();\n\n    if ((last && now < last + delay) || firstTime) {\n      firstTime = false;\n      clearTimeout(timer);\n\n      timer = setTimeout(function () {\n        last = now;\n        cb();\n      }, delay);\n    } else {\n      last = now;\n\n      if (!onlyAtEnd) {\n        firstTime = false;\n        cb();\n      }\n    }\n  };\n  const dispose = () => {\n    if (timer) clearTimeout(timer);\n    timer = null;\n  };\n\n  const ctx = {\n    init,\n    dispose\n  };\n\n  return ctx;\n};\n\nexport default Throttle;\n"],"names":["Module","init","start","stop","destroy","name","CLASSNAME_OPENED","ProjectArchive","el","emitter","this","projects","$$","_enterProjects","bind","_leaveProjects","_imageSwap","currentProject","imgThrottler","Throttle","cb","delay","onlyAtEnd","dispose","_enterPreviews","_leavePreviews","_bindEvents","_unbindEvents","forEach","_el","classList","add","remove","e","currentTarget","on","off","instance","Factory","initialized","items","map","last","timer","options","firstTime","now","Date","clearTimeout","setTimeout","ctx"],"sourceRoot":""}