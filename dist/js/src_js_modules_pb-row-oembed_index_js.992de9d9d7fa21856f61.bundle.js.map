{"version":3,"file":"js/src_js_modules_pb-row-oembed_index_js.992de9d9d7fa21856f61.bundle.js","mappings":"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","sources":["webpack://samuelpasquier/./src/js/modules/module/Module.js","webpack://samuelpasquier/./src/js/modules/pb-row-oembed/PbRowOEmbed.js","webpack://samuelpasquier/./src/js/modules/pb-row-oembed/index.js","webpack://samuelpasquier/./src/js/modules/pb-row-oembed/factory.js","webpack://samuelpasquier/./src/js/ui/locomotive-scroll-vimeo/LocomotiveScrollVimeo.js","webpack://samuelpasquier/./src/js/ui/locomotive-scroll-vimeo/index.js","webpack://samuelpasquier/./src/js/utils/youtube-api.js","webpack://samuelpasquier/./src/js/ui/locomotive-scroll-youtube/LocomotiveScrollYoutube.js","webpack://samuelpasquier/./src/js/ui/locomotive-scroll-youtube/index.js"],"sourcesContent":["class Module {\n  init() {}\n\n  // called during Barba's afterEnter hook.\n  start() {}\n\n  // called during Barba's beforeLeave hook.\n  stop() {}\n\n  // called during Barba's afterLeave hook.\n  destroy() {}\n\n  // getter - setter\n  get name() {\n    return null;\n  }\n}\n\nexport default Module;\n","import { $ } from '@utils/dom';\nimport { on, off } from '@utils/listener';\nimport { instance as LocomotiveScrollVimeo } from \"@ui/locomotive-scroll-vimeo\";\nimport { instance as LocomotiveScrollYoutube } from \"@ui/locomotive-scroll-youtube\";\nimport { SELECTOR as LocomotiveScrollVimeoSelector } from \"@ui/locomotive-scroll-vimeo/LocomotiveScrollVimeo\";\nimport { SELECTOR as LocomotiveScrollYoutubeSelector } from \"@ui/locomotive-scroll-youtube/LocomotiveScrollYoutube\";\n\nclass PbRowOEmbed {\n  constructor(el, emitter) {\n    this.el = el;\n    this.emitter = emitter;\n    this.preview = $('.pb-row-oembed__preview', this.el);\n    this.button = $('.pb-row-oembed__button', this.el);\n\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this.init();\n  }\n\n  init() {}\n  destroy() {\n    this.el = null;\n    this.emitter = null;\n    this.preview = null;\n    this.button = null;\n\n    this._onButtonClick = null;\n  }\n\n  start() { this._bindEvents(); }\n  stop() { this._unbindEvents(); }\n\n  _bindEvents() {\n    if( this.button ) on(this.button, 'click', this._onButtonClick);\n  }\n  _unbindEvents() {\n    if( this.button ) off(this.button, 'click', this._onButtonClick);\n  }\n\n  _onButtonClick(event) {\n    if( event ) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    }\n\n    // unbind events\n    this._unbindEvents();\n\n    // get iFrame source\n    const src = $('script', this.el).innerHTML;\n\n    // add iFrame to DOM and remove preview at the same time\n    this.preview.parentNode.innerHTML = src;\n    this.preview = null;\n    this.button = null;\n\n    // try to create a Youtube oEmbed\n    const youtube = $(LocomotiveScrollYoutubeSelector, this.el);\n    if( youtube ) LocomotiveScrollYoutube.add(youtube);\n    else {\n      // otherwise, try Vimeo oEmbed\n      const vimeo = $(LocomotiveScrollVimeoSelector, this.el);\n      if( vimeo ) LocomotiveScrollVimeo.add(vimeo);\n    }\n  }\n}\n\nexport default PbRowOEmbed;\n","import Factory from \"./factory\";\n\nexport const instance = new Factory();\n\nexport default { instance };\n","import { $$ } from \"@utils/dom\";\n\nimport Module from \"../module/Module\";\nimport PbRowOEmbed from \"./PbRowOEmbed\";\n\nexport const SELECTOR = `[data-pb-row-oembed]`;\n\nclass Factory extends Module {\n  constructor(init = false) {\n    super();\n\n    this.initialized = false;\n    this.items = null;\n\n    init ? this.init() : null;\n  }\n\n  get name() {\n    return \"PbRowOEmbed\";\n  }\n\n  init() {\n    // set initialized\n    this.initialized = true;\n    this.items = [...$$(SELECTOR)].map(el => new PbRowOEmbed(el, this.emitter));\n  }\n  destroy() {\n    if (this.items) this.items.forEach(el => el.destroy());\n\n    this.initialized = false;\n    this.items = null;\n  }\n\n  start() {\n    if (this.items) this.items.forEach(el => el.start());\n  }\n  stop() {\n    if (this.items) this.items.forEach(el => el.stop());\n  }\n}\n\nexport default Factory;\n","import { $$ } from \"@utils/dom\";\nimport { mobile } from \"@utils/mobile\";\n\nexport const SELECTOR = `.wysiwyg iframe[src*=\"vimeo.com\"]`;\n\nconst STATUS_DESTROYED = 0;\nconst STATUS_INITIALIZED = 1;\nconst STATUS_STOPPED = 2;\nconst STATUS_STARTED = 3;\n\nlet Player;\n\nclass LocomotiveScrollVimeo {\n  constructor(init = false) {\n    this.items = null;\n\n    this._elements = null;\n    this._promise = null;\n    this._status = STATUS_DESTROYED;\n\n    init ? this.init() : null;\n  }\n\n  init() {\n    // do nothing for mobile\n    if (mobile) return;\n\n    // query all elements that will turn into LocomotiveScrollVimeoItem later\n    this._elements = Array.from($$(SELECTOR));\n\n    // if there is no elements, skip here\n    if( !this._elements || this._elements.length === 0 ) return;\n\n    // set status as initialized\n    this._status = STATUS_INITIALIZED;\n\n    // load Vimeo API\n    if( !Player && !this._promise ) {\n      this._promise = import(\"@vimeo/player\");\n      this._promise.then(chunk => {\n        Player = chunk.default;\n\n        // if status is lower than initialized (ex: destroyed), do nothing\n        if( this._status < STATUS_INITIALIZED ) return;\n        \n        // create childs\n        this._initChildren();\n\n        // if status is started, start childs\n        if( this._status === STATUS_STARTED ) this.start();\n      });\n      this._promise.catch(e => {\n        console.error(\"Error loading Vimeo Player API :\", e);\n      });\n    }\n    else if( Player ) this._initChildren();\n  }\n\n  destroy() {\n    if (this.items) this.items.forEach(el => el.destroy());\n    this.items = null;\n\n    this._elements = null;\n    this._status = STATUS_DESTROYED;\n  }\n\n  start() {\n    this._status = STATUS_STARTED;\n    if (this.items) this.items.forEach(el => el.start());\n  }\n  stop() {\n    if (this.items) this.items.forEach(el => el.stop());\n    this._status = STATUS_STOPPED;\n  }\n\n  add(el) {\n    // do nothing for mobile\n    if (mobile) return;\n\n    // if not already initialized, set as initialized\n    if( this._status < STATUS_INITIALIZED ) this._status = STATUS_INITIALIZED;\n\n    // load Vimeo API\n    if( !Player && !this._promise ) {\n      this._promise = import(\"@vimeo/player\");\n      this._promise.then(chunk => {\n        Player = chunk.default;\n\n        // if status is lower than initialized (ex: destroyed), do nothing\n        if( this._status < STATUS_INITIALIZED ) return;\n        \n        // create child instance\n        const item = new LocomotiveScrollVimeoItem(el);\n\n        // save instance for later\n        if( !this.items ) this.items = [];\n        this.items.push(item);\n\n        // start instance if module is started\n        if( this._status === STATUS_STARTED ) item.start();\n      });\n      this._promise.catch(e => {\n        console.error(\"Error loading Vimeo Player API :\", e);\n      });\n    }\n    else if( Player ) {\n      // create child instance\n      const item = new LocomotiveScrollVimeoItem(el);\n\n      // save instance for later\n      if( !this.items ) this.items = [];\n      this.items.push(item);\n\n      // start instance if module is started\n      if( this._status === STATUS_STARTED ) item.start();\n    }\n  }\n  remove(el) {\n    // remove from uninitialized element if exists\n    if( this._elements ) this._elements = this._elements.filter(element => element !== el);\n\n    // remove from items\n    if( this.items ) {\n      // find his index in array\n      const index = this.items.findIndex(item => item.el === el);\n\n      // if found in array, stop and remove instance\n      if( index > -1 ) {\n        const item = this.items.splice(index, 1)[0];\n              item.stop();\n              item.destroy();\n      }\n    }\n  }\n\n  _initChildren() {\n    this.items = this._elements.map(el => new LocomotiveScrollVimeoItem(el));\n    this._elements = null;\n  }\n}\n\nclass LocomotiveScrollVimeoItem {\n  constructor(el) {\n    this.el = el;\n    this.parent = this.el.parentNode;\n\n    // just to make sure this iframe is contained in a responsive box of our own\n    //if (!this.parent.classList.contains(\"box\")) this.parent = null;\n\n\n    const urlParams = new URLSearchParams(this.el.src);\n    this._autoplay = urlParams.get('autoplay') === '1';\n\n    this._onClick = this._onClick.bind(this);\n    this._onPlaying = this._onPlaying.bind(this);\n    this._onPause = this._onPause.bind(this);\n  }\n\n  destroy() {\n    if (this.player) this.player.destroy();\n\n    this.el = null;\n    this.parent = null;\n    this.player = null;\n\n    this._autoplay = null;\n\n    this._onClick = null;\n    this._onPlaying = null;\n    this._onPause = null;\n  }\n  start() {\n    this._bindEvents();\n\n    // autoplay hack\n    if( this._autoplay ) this._onClick();\n  }\n  stop() {\n    this._unbindEvents();\n\n    if (this.player) {\n      this.player.off(\"playing\", this._onPlaying);\n      this.player.off(\"pause\", this._onPause);\n    }\n  }\n\n  _bindEvents() {\n    if (this.parent) {\n      this.el.style.pointerEvents = \"none\";\n\n      this.parent.removeEventListener(\"click\", this._onClick);\n      this.parent.addEventListener(\"click\", this._onClick);\n    }\n  }\n  _unbindEvents() {\n    if (this.parent) {\n      this.el.style.pointerEvents = \"\";\n      this.parent.removeEventListener(\"click\", this._onClick);\n    }\n  }\n\n  _onClick(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n\n    if (!this.player) {\n      this.player = new Player(this.el);\n      this.player.on(\"playing\", this._onPlaying);\n      this.player.on(\"pause\", this._onPause);\n    }\n\n    this.player.play();\n  }\n  _onPlaying() {\n    this._unbindEvents();\n  }\n  _onPause() {\n    this._bindEvents();\n  }\n}\n\nexport default LocomotiveScrollVimeo;\n","import LocomotiveScrollVimeo from \"./LocomotiveScrollVimeo\";\n\nexport const instance = new LocomotiveScrollVimeo();\n\nexport default { instance };\n","import { head } from \"@utils/dom\";\n\nclass YoutubeAPI {\n  constructor() {\n    this._script = null;\n    this._ready = false;\n    this._promises = [];\n\n    window.onYouTubeIframeAPIReady = () => {\n      this._ready = true;      \n      this._promises.forEach(promise => promise());\n      this._promises = null;\n\n      window.onYouTubeIframeAPIReady = null;\n    }\n  }\n\n  load() {\n    if( this._ready ) return Promise.resolve();\n\n    const promise = new Promise((resolve) => this._promises.push(resolve));    \n\n    if( !this._script ) {\n      this._script = document.createElement(\"script\");\n      this._script.onerror = e => { console.error(\"Error loading Youtube iFrame API :\", e); };\n      this._script.src = \"https://www.youtube.com/iframe_api\";\n\n      head.appendChild(this._script);\n    }\n\n    return promise;\n  }\n\n  // getter\n  get ready() { return this._ready; }\n}\n\nconst SINGLETON = new YoutubeAPI();\nexport default SINGLETON;\n","import { $$ } from \"@utils/dom\";\nimport { mobile } from \"@utils/mobile\";\nimport YoutubeAPI from \"@utils/youtube-api\";\n\nexport const SELECTOR = `.wysiwyg iframe[src*=\"youtube.com\"]`;\n\nconst STATUS_DESTROYED = 0;\nconst STATUS_INITIALIZED = 1;\nconst STATUS_STOPPED = 2;\nconst STATUS_STARTED = 3;\n\nlet UDID = 1;\n\nclass LocomotiveScrollYoutube {\n  constructor(init = false) {\n    this.items = null;\n\n    this._elements = null;\n    this._status = STATUS_DESTROYED;\n\n    this._initChildren = this._initChildren.bind(this);\n\n    init ? this.init() : null;\n  }\n\n  init() {\n    // do nothing for mobile\n    if (mobile) return;\n\n    // query all elements that will turn into LocomotiveScrollYoutubeItem later\n    this._elements = Array.from($$(SELECTOR));\n\n    // if there is no elements, skip here\n    if( !this._elements || this._elements.length === 0 ) return;\n\n    // set status as initialized\n    this._status = STATUS_INITIALIZED;\n\n    // load Youtube API\n    YoutubeAPI.load().then(() => {\n      // if status is lower than initialized (ex: destroyed), do nothing\n      if( this._status < STATUS_INITIALIZED ) return;\n      \n      // create childs\n      this._initChildren();\n\n      // if status is started, start childs\n      if( this._status === STATUS_STARTED ) this.start();\n    });\n  }\n  destroy() {\n    if (this.items) this.items.forEach(el => el.destroy());\n    this.items = null;\n\n    this._elements = null;\n    this._status = STATUS_DESTROYED;\n  }\n\n  start() {\n    this._status = STATUS_STARTED;\n    if (this.items) this.items.forEach(el => el.start());\n  }\n  stop() {\n    if (this.items) this.items.forEach(el => el.stop());\n    this._status = STATUS_STOPPED;\n  }\n\n  add(el) {\n    // do nothing for mobile\n    if (mobile) return;\n\n    // if not already initialized, set as initialized\n    if( this._status < STATUS_INITIALIZED ) this._status = STATUS_INITIALIZED;\n\n    // load YoutubeAPI and create child instance\n    YoutubeAPI.load().then(() => {\n      // if module is destroyed during API loading, do nothing\n      if( this._status < STATUS_INITIALIZED ) return;\n\n      // create child instance\n      const item = new LocomotiveScrollYoutubeItem(el);\n\n      // save instance for later\n      if( !this.items ) this.items = [];\n      this.items.push(item);\n\n      // start instance if module is started\n      if( this._status === STATUS_STARTED ) item.start();\n    });\n  }\n  remove(el) {\n    // remove from uninitialized element if exists\n    if( this._elements ) this._elements = this._elements.filter(element => element !== el);\n\n    // remove from items\n    if( this.items ) {\n      // find his index in array\n      const index = this.items.findIndex(item => item.el === el);\n\n      // if found in array, stop and remove instance\n      if( index > -1 ) {\n        const item = this.items.splice(index, 1)[0];\n              item.stop();\n              item.destroy();\n      }\n    }\n  }\n\n  _initChildren() {\n    this.items = this._elements.map(el => new LocomotiveScrollYoutubeItem(el));\n    this._elements = null;\n  }\n}\n\nclass LocomotiveScrollYoutubeItem {\n  constructor(el) {\n    this.el = el;\n    this.parent = this.el.parentNode;\n    this.udid = this.el.id ? this.el.id : null;\n\n    if( !this.udid ) {\n      this.udid = `youtube-smooth-scroll--${UDID++}`;\n      this.el.id = this.udid;\n    }\n\n    const urlParams = new URLSearchParams(this.el.src);\n\n    this._autoplay = urlParams.get('autoplay') === '1';\n    this._playerReady = false;\n    this._playerStatus = null;\n\n    this._onClick = this._onClick.bind(this);\n    this._onReady = this._onReady.bind(this);\n    this._onStateChange = this._onStateChange.bind(this);\n  }\n\n  destroy() {\n    if (this.player) this.player.destroy();\n\n    this.el = null;\n    this.parent = null;\n    this.player = null;\n    this.udid = null;\n\n    this._autoplay = null;\n    this._playerReady = null;\n    this._playerStatus = null;\n\n    this._onClick = null;\n    this._onReady = null;\n    this._onStateChange = null;\n  }\n  start() {\n    this._bindEvents();\n\n    // autoplay hack\n    if( this._autoplay ) {\n      this._onClick();\n      this._onStateChange({data: YT.PlayerState.PLAYING});\n    }\n  }\n  stop() {\n    this._unbindEvents();\n\n    if (this.player) {\n      this.player.removeEventListener(\"onReady\", this._onReady);\n      this.player.removeEventListener(\"onStateChange\", this._onStateChange);\n    }\n  }\n\n  _bindEvents() {\n    if (this.parent) {\n      this.el.style.pointerEvents = \"none\";\n\n      this.parent.removeEventListener(\"click\", this._onClick);\n      this.parent.addEventListener(\"click\", this._onClick);\n    }\n  }\n  _unbindEvents() {\n    if (this.parent) {\n      this.el.style.pointerEvents = \"\";\n      this.parent.removeEventListener(\"click\", this._onClick);\n    }\n  }\n\n  _onClick(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n\n    if (!this.player) {\n      this.player = new YT.Player(this.udid);\n      this.player.addEventListener(\"onReady\", this._onReady);\n      this.player.addEventListener(\"onStateChange\", this._onStateChange);\n    } else if( this._playerReady === true ) {\n      this.player.playVideo();\n    }\n  }\n  _onReady() {\n    this._playerReady = true;\n    this.player.playVideo();\n\n    this._unbindEvents();\n  }\n  _onStateChange(event) {\n    this._playerReady = true;\n    \n    // on pause or ended\n    if(event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) this._bindEvents();\n    // on playing\n    else if(event.data === YT.PlayerState.PLAYING) this._unbindEvents();\n  }\n}\n\nexport default LocomotiveScrollYoutube;\n","import LocomotiveScrollYoutube from \"./LocomotiveScrollYoutube\";\n\nexport const instance = new LocomotiveScrollYoutube();\n\nexport default { instance };\n"],"names":["Module","init","start","stop","destroy","name","PbRowOEmbed","el","emitter","this","preview","$","button","_onButtonClick","bind","_bindEvents","_unbindEvents","on","off","event","preventDefault","stopImmediatePropagation","src","innerHTML","parentNode","youtube","LocomotiveScrollYoutubeSelector","LocomotiveScrollYoutube","vimeo","LocomotiveScrollVimeoSelector","LocomotiveScrollVimeo","instance","Factory","initialized","items","$$","map","forEach","Player","SELECTOR","_elements","_promise","_status","mobile","Array","from","length","_initChildren","then","chunk","default","catch","e","console","error","add","item","LocomotiveScrollVimeoItem","push","remove","filter","element","index","findIndex","splice","parent","urlParams","URLSearchParams","_autoplay","get","_onClick","_onPlaying","_onPause","player","style","pointerEvents","removeEventListener","addEventListener","stopPropagation","play","YoutubeAPI","_script","_ready","_promises","window","onYouTubeIframeAPIReady","promise","load","Promise","resolve","document","createElement","onerror","head","ready","UDID","LocomotiveScrollYoutubeItem","udid","id","_playerReady","_playerStatus","_onReady","_onStateChange","data","YT","PlayerState","PLAYING","playVideo","PAUSED","ENDED"],"sourceRoot":""}