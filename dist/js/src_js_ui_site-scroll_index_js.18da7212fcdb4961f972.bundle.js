"use strict";(self.webpackChunksamuelpasquier=self.webpackChunksamuelpasquier||[]).push([["src_js_ui_site-scroll_index_js"],{"./src/js/ui/site-scroll/index.js":(t,s,i)=>{i.r(s),i.d(s,{default:()=>b,instance:()=>y});var o=i("./node_modules/locomotive-scroll/dist/locomotive-scroll.esm.js"),e=i("./src/js/utils/dom.js"),l=i("./src/js/utils/mobile.js"),n=i("./src/js/utils/resize.js");function r(t,s){(null==s||s>t.length)&&(s=t.length);for(var i=0,o=new Array(s);i<s;i++)o[i]=t[i];return o}function c(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function a(t,s){for(var i=0;i<s.length;i++){var o=s[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,s){if(!t)return;if("string"==typeof t)return r(t,s);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,s)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u,d="--js-scroll-min",f="--js-scroll-down",m="--js-scroll-up",p="--js-scroll-disabled",v=function(){function t(){var s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(this,t),this.initialized=!1,this.hasScrolledAboveThreshold=!1,this.scrollDirection=null,this.previousScrollY=null,this.el=null,u=this,this._onCall=this._onCall.bind(this),this._onScroll=this._onScroll.bind(this),this._onResize=this._onResize.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.update=this.update.bind(this),this.scrollTo=this.scrollTo.bind(this),this.scrollUp=this.scrollUp.bind(this),s&&this.init()}var s,i,r;return s=t,i=[{key:"name",get:function(){return"SiteScroll"}},{key:"init",value:function(){this.initialized=!0,this.hasScrolledAboveThreshold=!1,this.scrollDirection=null,this.previousScrollY=0,this.el=(0,e.$)("[data-scroll-container]"),this.scrollSections=h((0,e.$$)(".pb-row-wrapper[data-scroll-section]",this.el)).map((function(t){return{section:t,target:t.firstElementChild}})),this.ro||(this.ro=(0,n.Z)(this._onResize)),this.ro.run(),this.scroll=new o.ZP({el:this.el,smooth:!0,repeat:!1,tablet:{breakpoint:0}}),this.scroll.on("call",this._onCall),this.scroll.on("scroll",this._onScroll),this._bindEvents()}},{key:"destroy",value:function(){this.ro&&this.ro.off(),this.scroll&&(this.scroll.off("call",this._onCall),this.scroll.off("scroll",this._onScroll),this.scroll.destroy()),this.emitter&&(this.emitter.off("".concat(this.name,".stop"),this.stop),this.emitter.off("".concat(this.name,".start"),this.start),this.emitter.off("".concat(this.name,".update"),this.update),this.emitter.off("".concat(this.name,".scrollTo"),this.scrollTo),this.emitter.off("".concat(this.name,".scrollUp"),this.scrollUp)),this.el=null,this.scrollSections=null,this.scroll=null,this.initialized=!1,this.hasScrolledAboveThreshold=!1,this.scrollDirection=null,this.previousScrollY=null}},{key:"update",value:function(){this.ro&&this.ro.run(),this.scroll&&this.scroll.update()}},{key:"start",value:function(){this.scroll&&(this.scroll.start(),e.dy.classList.remove(p))}},{key:"stop",value:function(){this.scroll&&(this.scroll.stop(),e.dy.classList.add(p))}},{key:"scrollTo",value:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.scroll&&this.scroll.scrollTo(t,{offset:s})}},{key:"scrollUp",value:function(){this.scroll&&this.scroll.scrollTo(0,0,100)}},{key:"_bindEvents",value:function(){this.ro&&this.ro.on(),this.emitter&&(this.emitter.on("".concat(this.name,".stop"),this.stop),this.emitter.on("".concat(this.name,".start"),this.start),this.emitter.on("".concat(this.name,".update"),this.update),this.emitter.on("".concat(this.name,".scrollTo"),this.scrollTo),this.emitter.on("".concat(this.name,".scrollUp"),this.scrollUp))}},{key:"_onCall",value:function(t,s,i){var o=this;Array.isArray(t)?t.forEach((function(t){return o._executeCall(t,s,i)})):this._executeCall(t,s,i)}},{key:"_executeCall",value:function(t,s,i){this.emitter.emit("".concat(this.name,".").concat(t),s,i)}},{key:"_onScroll",value:function(t){var s=t.scroll.y,i=s-this.previousScrollY,o=i>=0?"down":"up",l=s>200,n=Math.abs(i)>=2;this.previousScrollY=s,this.emitter.emit("".concat(this.name,".scroll"),s),!0===l&&!1===this.hasScrolledAboveThreshold?(this.hasScrolledAboveThreshold=!0,this.state.dispatch("SCROLL_MIN",!0),e.d1.classList.add(d)):!1===l&&!0===this.hasScrolledAboveThreshold&&(this.hasScrolledAboveThreshold=!1,this.state.dispatch("SCROLL_MIN",!1),e.d1.classList.remove(d)),n&&o!==this.direction&&(null===this.direction?e.d1.classList.add("down"===o?f:m):"down"===o?e.d1.classList.replace(m,f):e.d1.classList.replace(f,m),this.scrollDirection=o,this.state.dispatch("SCROLL_DIRECTION",o),this.emitter.emit("".concat(this.name,".direction"),o))}},{key:"_onResize",value:function(){l.a||this.scrollSections.forEach((function(t){var s=t.section,i=t.target,o=(0,e.JA)(i).height;s.style.setProperty("--row-height","".concat(Math.floor(o),"px"))}))}},{key:"y",get:function(){return this.scroll?this.scroll.scroll.instance.scroll.y:0}},{key:"direction",get:function(){return this.scrollDirection}}],r=[{key:"getSingleton",value:function(){return u}}],i&&a(s.prototype,i),r&&a(s,r),t}();var y=new v;const b={instance:y}},"./src/js/utils/resize.js":(t,s,i)=>{i.d(s,{Z:()=>l});var o=i("./src/js/utils/listener.js"),e=i("./src/js/utils/throttle.js");const l=function(t){var s,i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(){s||(requestAnimationFrame(d),s=!0)},c=function(t){i=t,a.init()},a=(0,e.Z)({cb:r,delay:l,onlyAtEnd:n}),h=function(){(0,o.on)(window,"orientationchange",c),(0,o.on)(window,"resize",c)},u=function(){(0,o.S1)(window,"orientationchange",c),(0,o.S1)(window,"resize",c)},d=function(){t(i),s=!1},f=function(){a.dispose(),s=!0},m={dispose:f,on:h,off:u,run:d};return m}},"./src/js/utils/throttle.js":(t,s,i)=>{i.d(s,{Z:()=>o});const o=function(){var t,s,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{delay:200,onlyAtEnd:!1},o=i.delay,e=i.cb,l=i.onlyAtEnd,n=function(){var i=!0,n=Date.now();t&&n<t+o||i?(i=!1,clearTimeout(s),s=setTimeout((function(){t=n,e()}),o)):(t=n,l||(i=!1,e()))},r=function(){s&&clearTimeout(s),s=null},c={init:n,dispose:r};return c}}}]);
//# sourceMappingURL=src_js_ui_site-scroll_index_js.18da7212fcdb4961f972.bundle.js.map