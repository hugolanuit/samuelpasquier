"use strict";(self.webpackChunksamuelpasquier=self.webpackChunksamuelpasquier||[]).push([["src_js_modules_text-ticker_index_js"],{"./src/js/modules/module/Module.js":(t,e,i)=>{function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.d(e,{Z:()=>r});const r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,r;return e=t,(i=[{key:"init",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"destroy",value:function(){}},{key:"name",get:function(){return null}}])&&n(e.prototype,i),r&&n(e,r),t}()},"./src/js/modules/text-ticker/index.js":(t,e,i)=>{i.r(e),i.d(e,{default:()=>R,instance:()=>A});var n=i("./src/js/utils/dom.js"),r=i("./src/js/modules/module/Module.js"),o=function(t,e,i){return t*(1-i)+e*i};var s=i("./src/js/utils/mobile.js"),l=i("./src/js/utils/resize.js"),u=(i("./src/js/utils/browser.js"),i("./src/js/utils/listener.js"));const a=function(t){var e,i,n=!1,r=function(t){(e=t).cancelable&&e.preventDefault(),n||(requestAnimationFrame(s),n=!0)},o=function(){t(i,e),n=!1},s=function(){if(e){var t=e.type;"wheel"===t?(i=e.wheelDeltaY||-1*e.deltaY,o()):"mousewheel"===t&&(i=e.wheelDeltaY?e.wheelDeltaY:e.wheelDelta,o())}};return{on:function(){(0,u.on)(document,"mouseWheel",r)},off:function(){(0,u.S1)(document,"mouseWheel",r)}}};function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=.08,f="css",_="js",d="scroll",v=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.emitter=i,this.template=(0,n.$)(".text-ticker__text",this.el),this.texts=[this.template],this._mode=this._getMode(),this._direction=this._getDirection(),this._velocity={target:h*this._direction,current:h*this._direction},this._progress=0,this._raf=null,this._wheel=null,this._ro=null,this._inView=!1,this._onScroll=this._onScroll.bind(this),this._onRaf=this._onRaf.bind(this),this._onScrollStart=this._onScrollStart.bind(this),this._onScrollStop=this._onScrollStop.bind(this),this._onScrollCall=this._onScrollCall.bind(this),this._onResize=this._onResize.bind(this),this.init()}var e,i,r;return e=t,(i=[{key:"init",value:function(){this._ro=(0,l.Z)(this._onResize),this._ro.run(),this._mode===_||this._mode===d?(this.el.classList.add("--mode-js"),this._wheel=a(this._onScroll),this.el.hasAttribute("data-scroll")||(this._inView=!0)):this.el.classList.add("--mode-css"),this._bindEvents()}},{key:"destroy",value:function(){this._unbindEvents(),this._ro&&this._ro.dispose(),this.el=null,this.emitter=null,this.template=null,this.texts=null,this._mode=null,this._direction=null,this._velocity=null,this._progress=null,this._raf=null,this._wheel=null,this._ro=null,this._inView=null,this._onScroll=null,this._onRaf=null,this._onScrollStart=null,this._onScrollStop=null,this._onScrollCall=null,this._onResize=null}},{key:"_bindEvents",value:function(){var t,e,i,n,r;this._ro&&(null===(t=this._ro)||void 0===t||t.on()),this._wheel&&(null===(e=this._wheel)||void 0===e||e.on()),(this._mode===_||this._mode===d)&&(null===(i=this.emitter)||void 0===i||i.on("SiteScroll.start",this._onScrollStart),null===(n=this.emitter)||void 0===n||n.on("SiteScroll.stop",this._onScrollStop),null===(r=this.emitter)||void 0===r||r.on("SiteScroll.text-ticker",this._onScrollCall),this._raf=requestAnimationFrame(this._onRaf))}},{key:"_unbindEvents",value:function(){var t,e,i,n,r;this._mode!==_&&this._mode!==d||(null===(i=this.emitter)||void 0===i||i.off("SiteScroll.start",this._onScrollStart),null===(n=this.emitter)||void 0===n||n.off("SiteScroll.stop",this._onScrollStop),null===(r=this.emitter)||void 0===r||r.off("SiteScroll.text-ticker",this._onScrollCall)),this._ro&&(null===(t=this._ro)||void 0===t||t.off()),this._wheel&&(null===(e=this._wheel)||void 0===e||e.off()),this._raf&&cancelAnimationFrame(this._raf),this._raf=null}},{key:"_onScroll",value:function(t){this._velocity.target=.005*t,0!==this._direction&&(this._velocity.target=Math.abs(this._velocity.target)*this._direction)}},{key:"_onRaf",value:function(){var t=this;this.texts&&(this._raf=requestAnimationFrame(this._onRaf),this._velocity.target*=.9,this._mode===_&&(this._velocity.target>0?this._velocity.target=Math.max(h,this._velocity.target):this._velocity.target=Math.min(-.08,this._velocity.target)),this._velocity.current=o(this._velocity.current,this._velocity.target,.2),this._progress+=this._velocity.current,this._progress<-100?this._progress=this._progress+100:this._progress>0&&(this._progress=this._progress-100),this._inView&&this.texts.forEach((function(e){return e.style.transform="translate3d(".concat(t._progress,"%, 0, 0)")})))}},{key:"_onScrollStart",value:function(){var t;null===(t=this._wheel)||void 0===t||t.on(),this._raf=requestAnimationFrame(this._onRaf)}},{key:"_onScrollStop",value:function(){var t;null===(t=this._wheel)||void 0===t||t.off(),this._raf&&cancelAnimationFrame(this._raf),this._raf=null}},{key:"_onScrollCall",value:function(t,e){e.el===this.el&&(this._inView="enter"===t)}},{key:"_onResize",value:function(){var t=(0,n.JA)(this.el),e=(0,n.JA)(this.template);if(!(t.width<1||e.width<1))for(var i=Math.ceil(t.width/e.width)+1;this.texts.length<i;){var r=this.template.cloneNode(!0);r.setAttribute("aria-hidden",!0),r.style.setProperty("--ticker-index",this.texts.length),this.texts.push(r),this.el.appendChild(r)}}},{key:"_getDirection",value:function(){return this.el.classList.contains("--direction-left")?-1:this.el.classList.contains("--direction-both")?0:this.el.classList.contains("--direction-right")?1:void 0}},{key:"_getMode",value:function(){if(s.a)return f;switch(this.el.dataset.textTicker){case f:return f;case d:return d;default:return _}}}])&&c(e.prototype,i),r&&c(e,r),t}();const y=v;function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}function w(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}function j(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=S(t);if(e){var r=S(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return w(this,i)}}var A=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(s,t);var e,i,r,o=x(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p(this,s),(t=o.call(this)).initialized=!1,t.items=null,e&&t.init(),t}return e=s,(i=[{key:"name",get:function(){return"TextTicker"}},{key:"init",value:function(){var t=this;this.initialized=!0,this.items=j((0,n.$$)("[data-text-ticker]")).map((function(e){return new y(e,t.emitter)}))}},{key:"destroy",value:function(){this.items&&this.items.forEach((function(t){return t.destroy()})),this.initialized=!1,this.items=null}}])&&b(e.prototype,i),r&&b(e,r),s}(r.Z));const R={instance:A}},"./src/js/utils/resize.js":(t,e,i)=>{i.d(e,{Z:()=>o});var n=i("./src/js/utils/listener.js"),r=i("./src/js/utils/throttle.js");const o=function(t){var e,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=function(){e||(requestAnimationFrame(f),e=!0)},u=function(t){i=t,a.init()},a=(0,r.Z)({cb:l,delay:o,onlyAtEnd:s}),c=function(){(0,n.on)(window,"orientationchange",u),(0,n.on)(window,"resize",u)},h=function(){(0,n.S1)(window,"orientationchange",u),(0,n.S1)(window,"resize",u)},f=function(){t(i),e=!1},_=function(){a.dispose(),e=!0},d={dispose:_,on:c,off:h,run:f};return d}},"./src/js/utils/throttle.js":(t,e,i)=>{i.d(e,{Z:()=>n});const n=function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{delay:200,onlyAtEnd:!1},n=i.delay,r=i.cb,o=i.onlyAtEnd,s=function(){var i=!0,s=Date.now();t&&s<t+n||i?(i=!1,clearTimeout(e),e=setTimeout((function(){t=s,r()}),n)):(t=s,o||(i=!1,r()))},l=function(){e&&clearTimeout(e),e=null},u={init:s,dispose:l};return u}}}]);
//# sourceMappingURL=src_js_modules_text-ticker_index_js.7cabe8ced22c9e6db31a.bundle.js.map