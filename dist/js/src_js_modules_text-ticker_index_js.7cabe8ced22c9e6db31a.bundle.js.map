{"version":3,"file":"js/src_js_modules_text-ticker_index_js.7cabe8ced22c9e6db31a.bundle.js","mappings":"uWAkBA,QAlBA,W,SAAMA,K,+HACJC,IAAAA,O,MAAAA,c,CAGAC,IAAAA,Q,MAAAA,c,CAGAC,IAAAA,O,MAAAA,c,CAGAC,IAAAA,U,MAAAA,c,CAGIC,IAAAA,O,IAAJ,WACE,OAAO,U,6BAdX,I,yKC4CaC,EAAO,SAACC,EAAGC,EAAGC,GAAMF,OAAAA,GAAK,EAAIE,GAAKD,EAAIC,G,uIC2BnD,QAnDc,SAACC,GACb,IACEC,EACAC,EAFEC,GAAO,EAKLC,EAAO,SAACN,IACZG,EAAQH,GAEEO,YAAYJ,EAAMK,iBACvBH,IACHI,sBAAsBC,GACtBL,GAAO,IAWLM,EAAQ,WACZT,EAAGE,EAAOD,GACVE,GAAO,GAUHK,EAAO,WACX,GAAKP,EAAL,CACA,IAAMS,EAAQT,EAAMU,KAEN,UAAVD,GAvBJR,EAAQD,EAAMW,cAA+B,EAAhBX,EAAMY,OACnCJ,KAuBmB,eAAVC,IApBTR,EAAQD,EAAMW,YAAcX,EAAMW,YAAcX,EAAMa,WACtDL,OA2BF,MALY,CACVM,GAfU,YACVA,EAAAA,EAAAA,IAAGC,SAAU,aAAcZ,IAe3Ba,IAbW,YACXA,EAAAA,EAAAA,IAAID,SAAU,aAAcZ,M,sKC/ChC,IACMc,EAAW,IAEXC,EAAW,MACXC,EAAU,KACVC,EAAc,SAMdC,EAAN,W,SAAMA,EACQC,EAAIC,I,qGACdC,KAAKF,GAAKA,EACVE,KAAKD,QAAUA,EACfC,KAAKC,UAAWC,EAAAA,EAAAA,GAAE,qBAAsBF,KAAKF,IAC7CE,KAAKG,MAAQ,CAACH,KAAKC,UAEnBD,KAAKI,MAAQJ,KAAKK,WAClBL,KAAKM,WAAaN,KAAKO,gBACvBP,KAAKQ,UAAY,CAAEC,OAAQhB,EAAWO,KAAKM,WAAYI,QAASjB,EAAWO,KAAKM,YAChFN,KAAKW,UAAY,EACjBX,KAAKY,KAAO,KACZZ,KAAKa,OAAS,KACdb,KAAKc,IAAM,KACXd,KAAKe,SAAU,EAEff,KAAKgB,UAAYhB,KAAKgB,UAAUC,KAAKjB,MACrCA,KAAKkB,OAASlB,KAAKkB,OAAOD,KAAKjB,MAC/BA,KAAKmB,eAAiBnB,KAAKmB,eAAeF,KAAKjB,MAC/CA,KAAKoB,cAAgBpB,KAAKoB,cAAcH,KAAKjB,MAC7CA,KAAKqB,cAAgBrB,KAAKqB,cAAcJ,KAAKjB,MAC7CA,KAAKsB,UAAYtB,KAAKsB,UAAUL,KAAKjB,MAErCA,KAAKlC,O,0BAGPA,IAAAA,O,MAAAA,WACEkC,KAAKc,KAAMS,EAAAA,EAAAA,GAAkBvB,KAAKsB,WAClCtB,KAAKc,IAAIU,MAENxB,KAAKI,QAAUT,GAAWK,KAAKI,QAAUR,GAC1CI,KAAKF,GAAG2B,UAAUC,IAAI,aACtB1B,KAAKa,OAASc,EAAM3B,KAAKgB,WAGpBhB,KAAKF,GAAG8B,aAAa,iBAAiB5B,KAAKe,SAAU,IAE1Df,KAAKF,GAAG2B,UAAUC,IAAI,cAGxB1B,KAAK6B,gB,CAEP5D,IAAAA,U,MAAAA,WACE+B,KAAK8B,gBAED9B,KAAKc,KAAMd,KAAKc,IAAIiB,UAExB/B,KAAKF,GAAK,KACVE,KAAKD,QAAU,KACfC,KAAKC,SAAW,KAChBD,KAAKG,MAAQ,KAEbH,KAAKI,MAAQ,KACbJ,KAAKM,WAAa,KAClBN,KAAKQ,UAAY,KACjBR,KAAKW,UAAY,KACjBX,KAAKY,KAAO,KACZZ,KAAKa,OAAS,KACdb,KAAKc,IAAM,KACXd,KAAKe,QAAU,KAEff,KAAKgB,UAAY,KACjBhB,KAAKkB,OAAS,KACdlB,KAAKmB,eAAiB,KACtBnB,KAAKoB,cAAgB,KACrBpB,KAAKqB,cAAgB,KACrBrB,KAAKsB,UAAY,O,CAGnBO,IAAAA,c,MAAAA,W,IACgB,EACG,EAEf,EACA,EACA,EALE7B,KAAKc,MAAa,QAAR,EAAAd,KAAKc,WAAL,SAAUxB,MACpBU,KAAKa,SAAmB,QAAX,EAAAb,KAAKa,cAAL,SAAavB,OAC1BU,KAAKI,QAAUT,GAAWK,KAAKI,QAAUR,KAC/B,QAAZ,EAAAI,KAAKD,eAAL,SAAcT,GAAG,mBAAoBU,KAAKmB,gBAC9B,QAAZ,EAAAnB,KAAKD,eAAL,SAAcT,GAAG,kBAAmBU,KAAKoB,eAC7B,QAAZ,EAAApB,KAAKD,eAAL,SAAcT,GAAG,yBAA0BU,KAAKqB,eAChDrB,KAAKY,KAAO9B,sBAAsBkB,KAAKkB,W,CAG3CY,IAAAA,gB,MAAAA,W,IAOgB,EACG,EANf,EACA,EACA,EAHC9B,KAAKI,QAAUT,GAAWK,KAAKI,QAAUR,IAC9B,QAAZ,EAAAI,KAAKD,eAAL,SAAcP,IAAI,mBAAoBQ,KAAKmB,gBAC/B,QAAZ,EAAAnB,KAAKD,eAAL,SAAcP,IAAI,kBAAmBQ,KAAKoB,eAC9B,QAAZ,EAAApB,KAAKD,eAAL,SAAcP,IAAI,yBAA0BQ,KAAKqB,gBAG/CrB,KAAKc,MAAa,QAAR,EAAAd,KAAKc,WAAL,SAAUtB,OACpBQ,KAAKa,SAAmB,QAAX,EAAAb,KAAKa,cAAL,SAAarB,OAC1BQ,KAAKY,MAAMoB,qBAAqBhC,KAAKY,MAEzCZ,KAAKY,KAAO,O,CAGdI,IAAAA,Y,MAAAA,SAAUvC,GACRuB,KAAKQ,UAAUC,OAAiB,KAARhC,EAhGL,IAmGfuB,KAAKM,aAAgCN,KAAKQ,UAAUC,OAASwB,KAAKC,IAAIlC,KAAKQ,UAAUC,QAAUT,KAAKM,c,CAE1GY,IAAAA,S,MAAAA,W,WAEOlB,KAAKG,QAEVH,KAAKY,KAAO9B,sBAAsBkB,KAAKkB,QAGvClB,KAAKQ,UAAUC,QArHF,GAwHTT,KAAKI,QAAUT,IACbK,KAAKQ,UAAUC,OAAS,EAAGT,KAAKQ,UAAUC,OAASwB,KAAKE,IAAI1C,EAAUO,KAAKQ,UAAUC,QACpFT,KAAKQ,UAAUC,OAASwB,KAAKG,KAAI3C,IAAeO,KAAKQ,UAAUC,SAItET,KAAKQ,UAAUE,QAAUvC,EAAK6B,KAAKQ,UAAUE,QAASV,KAAKQ,UAAUC,OAAQ,IAG7ET,KAAKW,WAAaX,KAAKQ,UAAUE,QAG7BV,KAAKW,WAAa,IAAKX,KAAKW,UAAYX,KAAKW,UAAY,IACpDX,KAAKW,UAAY,IAAGX,KAAKW,UAAYX,KAAKW,UAAY,KAG3DX,KAAKe,SAAUf,KAAKG,MAAMkC,SAAQC,SAAAA,GAAQ,OAACA,EAAKC,MAAMC,UAAa,eAA6B,OAAQ,EAAlB7B,UAAU,kB,CAEtGQ,IAAAA,iB,MAAAA,W,IACE,EAAW,QAAX,EAAAnB,KAAKa,cAAL,SAAavB,KACbU,KAAKY,KAAO9B,sBAAsBkB,KAAKkB,U,CAEzCE,IAAAA,gB,MAAAA,W,IACE,EAAW,QAAX,EAAApB,KAAKa,cAAL,SAAarB,MAETQ,KAAKY,MAAMoB,qBAAqBhC,KAAKY,MACzCZ,KAAKY,KAAO,O,CAEdS,IAAAA,gB,MAAAA,SAAcoB,EAAWC,GAEnBA,EAAI5C,KAAOE,KAAKF,KAGpBE,KAAKe,QAAwB,UAAd0B,K,CAEjBnB,IAAAA,Y,MAAAA,WACE,IAAMqB,GAASC,EAAAA,EAAAA,IAAK5C,KAAKF,IACnB+C,GAAWD,EAAAA,EAAAA,IAAK5C,KAAKC,UAG3B,KAAI0C,EAAOG,MAAQ,GAAKD,EAASC,MAAQ,G,IAEzC,IAAMC,EAAWd,KAAKe,KAAKL,EAAOG,MAAQD,EAASC,OAAS,EAErD9C,KAAKG,MAAM8C,OAASF,GAAW,CACpC,IAAMG,EAAOlD,KAAKC,SAASkD,WAAU,GAC/BD,EAAKE,aAAa,eAAe,GACjCF,EAAKX,MAAMc,YAAY,iBAAkBrD,KAAKG,MAAM8C,QAE1DjD,KAAKG,MAAMmD,KAAKJ,GAChBlD,KAAKF,GAAGyD,YAAYL,M,CAIxB3C,IAAAA,gB,MAAAA,WACE,OAAIP,KAAKF,GAAG2B,UAAU+B,SAAS,qBAxKZ,EAyKVxD,KAAKF,GAAG2B,UAAU+B,SAAS,oBAvKjB,EAwKVxD,KAAKF,GAAG2B,UAAU+B,SAAS,qBAzKhB,OAyKf,I,CAEPnD,IAAAA,W,MAAAA,WACE,GAAIoD,EAAAA,EAAS,OAAO/D,EAEpB,OAAQM,KAAKF,GAAG4D,QAAQC,YACtB,KAAKjE,EAAU,OAAOA,EACtB,KAAKE,EAAa,OAAOA,E,QAChB,OAAOD,Q,6BA9KtB,GAmLA,U,y6DClMO,IAAMiE,EAAW,ICKxB,SAAQ,I,kQAAFC,I,MACQ/F,EAAO,UAAH,8C,kCAGTgG,aAAc,E,EACdC,MAAQ,KAEbjG,GAAO,EAAKA,O,kBAGVI,IAAAA,O,IAAJ,WACE,MAAO,e,CAGTJ,IAAAA,O,MAAAA,W,WAEEkC,KAAK8D,aAAc,EACnB9D,KAAK+D,MAAQ,GAAIC,EAAAA,EAAAA,IAnBI,uBAmBUC,KAAInE,SAAAA,GAAM,WAAID,EAAWC,EAAI,EAAKC,c,CAEnE9B,IAAAA,U,MAAAA,WACM+B,KAAK+D,OAAO/D,KAAK+D,MAAM1B,SAAQvC,SAAAA,GAAMA,OAAAA,EAAG7B,aAE5C+B,KAAK8D,aAAc,EACnB9D,KAAK+D,MAAQ,U,6BAvBjB,CAAsBlG,EAAAA,IDHtB,SAAiB+F,SAAAA,I,8HEmEjB,QAhD0B,SAACrF,G,IAarBG,EAAMF,EAbmB0F,EAAQ,UAAH,6CAAG,IAAKC,EAAY,UAAH,8CAE7CxF,EAAO,WACND,IACHI,sBAAsBC,GACtBL,GAAO,IAGL0F,EAAc,SAAC/F,GACnBG,EAAQH,EACRgG,EAASvG,QAILuG,GAAWC,EAAAA,EAAAA,GAAS,CACxB/F,GAAII,EACJuF,MAAAA,EACAC,UAAAA,IAIII,EAAM,YACVjF,EAAAA,EAAAA,IAAGkF,OAAQ,oBAAqBJ,IAChC9E,EAAAA,EAAAA,IAAGkF,OAAQ,SAAUJ,IAEjBK,EAAO,YACXjF,EAAAA,EAAAA,IAAIgF,OAAQ,oBAAqBJ,IACjC5E,EAAAA,EAAAA,IAAIgF,OAAQ,SAAUJ,IAElBrF,EAAO,WACXR,EAAGC,GACHE,GAAO,GAEHgG,EAAW,WACfL,EAAStC,UACTrD,GAAO,GAGHiG,EAAM,CACV5C,QAAS2C,EACTpF,GAAIiF,EACJ/E,IAAKiF,EACLjD,IAAKzC,GAGP,OAAO4F,I,wDCVT,QAtCiB,W,IAEXC,EAAMC,EAFMC,EAAU,UAAH,6CAAG,CAAEZ,MAAO,IAAKC,WAAW,GAC3CD,EAAyBY,EAAzBZ,MAAO3F,EAAkBuG,EAAlBvG,GAAI4F,EAAcW,EAAdX,UAGbrG,EAAO,WACX,IAAIiH,GAAY,EACdC,EAAMC,KAAKD,MAERJ,GAAQI,EAAMJ,EAAOV,GAAUa,GAClCA,GAAY,EACZG,aAAaL,GAEbA,EAAQM,YAAW,WACjBP,EAAOI,EACPzG,MACC2F,KAEHU,EAAOI,EAEFb,IACHY,GAAY,EACZxG,OAIAwD,EAAU,WACV8C,GAAOK,aAAaL,GACxBA,EAAQ,MAGJF,EAAM,CACV7G,KAAAA,EACAiE,QAAAA,GAGF,OAAO4C","sources":["webpack://samuelpasquier/./src/js/modules/module/Module.js","webpack://samuelpasquier/./src/js/utils/math.js","webpack://samuelpasquier/./src/js/utils/wheel.js","webpack://samuelpasquier/./src/js/modules/text-ticker/TextTicker.js","webpack://samuelpasquier/./src/js/modules/text-ticker/index.js","webpack://samuelpasquier/./src/js/modules/text-ticker/factory.js","webpack://samuelpasquier/./src/js/utils/resize.js","webpack://samuelpasquier/./src/js/utils/throttle.js"],"sourcesContent":["class Module {\n  init() {}\n\n  // called during Barba's afterEnter hook.\n  start() {}\n\n  // called during Barba's beforeLeave hook.\n  stop() {}\n\n  // called during Barba's afterLeave hook.\n  destroy() {}\n\n  // getter - setter\n  get name() {\n    return null;\n  }\n}\n\nexport default Module;\n","export const cover = (width, height, ratio) => {\n  let w = width;\n  let h = w / ratio;\n\n  if (h < height) {\n    h = height;\n    w = h * ratio;\n  }\n\n  return {\n    x: (width - w) * 0.5,\n    y: (height - h) * 0.5,\n    width: w,\n    height: h\n  };\n};\n\n/**\n * Calculate hypothenuse of a triangle\n */\nexport const hypothenuse = (x1, y1, x2, y2) => {\n  return Math.hypot(Math.abs(x2 - x1), Math.abs(y2 - y1));\n};\n\n/**\n * Calculate length of c in a triangle using Pythagore formula\n * pythagore(300, 200);\n */\nexport const pythagore = (a, b) => Math.sqrt(a * a + b * b);\n\n/**\n * degreeToRad(degree);\n * Example :\n * degreeToRad(45) returns 0.7853981633974483;\n */\nexport const degreeToRad = (d) => {\n const pi = Math.PI;\n return d * (pi/180);\n};\n\n/**\n * lerp(start, end, multiplier);\n * lerp(0, 100, 0.12);\n */\nexport const lerp = (s, e, m) => s * (1 - m) + e * m;\n\n/**\n * Limit value between minimum and maximum\n * limit(-1, 1, -0.35);\n */\nexport const limit = (min, max, value) => Math.max(min, Math.min(max, value));\n\n\nexport default {\n  cover,\n  hypothenuse,\n  pythagore,\n  degreeToRad,\n  lerp,\n  limit\n};\n","/*\n\n──────────────────────────────────────────\n──────────────────────────────────────────\nWHEEL\n──────────────────────────────────────────\n──────────────────────────────────────────\n\nconst wt = Wheel(cb);\n      wt.on();  // start listening to mouse wheel events\n      wt.off(); // stop listening to mouse wheel events\n\nfunction cb(delta, event) {\n  // do something\n}\n\n*/\nimport Browser from \"./browser\";\nimport { on, off } from \"./listener\";\n\nconst Wheel = (cb) => {\n  let tick = false,\n    event,\n    delta;\n\n  // PRIVATE API\n  const gRaf = (e) => {\n    event = e;\n\n    if (event.cancelable) event.preventDefault();\n    if (!tick) {\n      requestAnimationFrame(_run);\n      tick = true;\n    }\n  };\n  const onWheel = () => {\n    delta = event.wheelDeltaY || event.deltaY * -1;\n    getCb();\n  };\n  const onMouseWheel = () => {\n    delta = event.wheelDeltaY ? event.wheelDeltaY : event.wheelDelta;\n    getCb();\n  };\n  const getCb = () => {\n    cb(delta, event);\n    tick = false;\n  };\n\n  // PUBLIC API\n  const _on = () => {\n    on(document, \"mouseWheel\", gRaf);\n  };\n  const _off = () => {\n    off(document, \"mouseWheel\", gRaf);\n  };\n  const _run = () => {\n    if (!event) return;\n    const eType = event.type;\n\n    if (eType === \"wheel\") onWheel();\n    else if (eType === \"mousewheel\") onMouseWheel();\n  };\n\n  const ctx = {\n    on: _on,\n    off: _off\n  };\n\n  return ctx;\n};\n\nexport default Wheel;\n","import { $, rect } from \"@utils/dom\";\nimport { lerp } from \"@utils/math\";\nimport { mobile } from \"@utils/mobile\";\nimport ResizeOrientation from \"@utils/resize\";\nimport Wheel from \"@utils/wheel\";\n\nconst FRICTION = 0.9;\nconst VELOCITY = 0.08;\n\nconst MODE_CSS = 'css';\nconst MODE_JS = 'js';\nconst MODE_SCROLL = 'scroll';\n\nconst DIRECTION_LEFT = -1;\nconst DIRECTION_RIGHT = 1;\nconst DIRECTION_BOTH = 0;\n\nclass TextTicker {\n  constructor(el, emitter) {\n    this.el = el;\n    this.emitter = emitter;\n    this.template = $(\".text-ticker__text\", this.el);\n    this.texts = [this.template];\n\n    this._mode = this._getMode();\n    this._direction = this._getDirection();\n    this._velocity = { target: VELOCITY * this._direction, current: VELOCITY * this._direction };\n    this._progress = 0;\n    this._raf = null;\n    this._wheel = null;\n    this._ro = null;\n    this._inView = false;\n\n    this._onScroll = this._onScroll.bind(this);\n    this._onRaf = this._onRaf.bind(this);\n    this._onScrollStart = this._onScrollStart.bind(this);\n    this._onScrollStop = this._onScrollStop.bind(this);\n    this._onScrollCall = this._onScrollCall.bind(this);\n    this._onResize = this._onResize.bind(this);\n\n    this.init();\n  }\n\n  init() {\n    this._ro = ResizeOrientation(this._onResize);\n    this._ro.run();\n\n    if(this._mode === MODE_JS || this._mode === MODE_SCROLL ) {\n      this.el.classList.add(\"--mode-js\");\n      this._wheel = Wheel(this._onScroll);\n\n      // if element does'nt have data-scroll, assume he's always inView\n      if( !this.el.hasAttribute('data-scroll') ) this._inView = true;\n    } else {\n      this.el.classList.add('--mode-css');\n    }\n\n    this._bindEvents();\n  }\n  destroy() {\n    this._unbindEvents();\n\n    if( this._ro ) this._ro.dispose();\n\n    this.el = null;\n    this.emitter = null;\n    this.template = null;\n    this.texts = null;\n\n    this._mode = null;\n    this._direction = null;\n    this._velocity = null;\n    this._progress = null;\n    this._raf = null;\n    this._wheel = null;\n    this._ro = null;\n    this._inView = null;\n\n    this._onScroll = null;\n    this._onRaf = null;\n    this._onScrollStart = null;\n    this._onScrollStop = null;\n    this._onScrollCall = null;\n    this._onResize = null;\n  }\n\n  _bindEvents() {\n    if (this._ro) this._ro?.on();\n    if (this._wheel) this._wheel?.on();\n    if (this._mode === MODE_JS || this._mode === MODE_SCROLL) {\n      this.emitter?.on(\"SiteScroll.start\", this._onScrollStart);\n      this.emitter?.on(\"SiteScroll.stop\", this._onScrollStop);\n      this.emitter?.on(\"SiteScroll.text-ticker\", this._onScrollCall);\n      this._raf = requestAnimationFrame(this._onRaf);\n    }\n  }\n  _unbindEvents() {\n    if(this._mode === MODE_JS || this._mode === MODE_SCROLL) {\n      this.emitter?.off(\"SiteScroll.start\", this._onScrollStart);\n      this.emitter?.off(\"SiteScroll.stop\", this._onScrollStop);\n      this.emitter?.off(\"SiteScroll.text-ticker\", this._onScrollCall);\n    }\n\n    if (this._ro) this._ro?.off();\n    if (this._wheel) this._wheel?.off();\n    if (this._raf) cancelAnimationFrame(this._raf);\n\n    this._raf = null;\n  }\n\n  _onScroll(delta) {\n    this._velocity.target = delta * 0.005;\n\n    // apply directional restriction on velocity\n    if( this._direction !== DIRECTION_BOTH ) this._velocity.target = Math.abs(this._velocity.target) * this._direction;\n  }\n  _onRaf() {\n    // do nothing if we have no text to move\n    if (!this.texts) return;\n\n    this._raf = requestAnimationFrame(this._onRaf);\n\n    // apply friction\n    this._velocity.target *= FRICTION;\n\n    // set minimal velocity based on is current direction (only for JS mode)\n    if( this._mode === MODE_JS ) {\n      if (this._velocity.target > 0) this._velocity.target = Math.max(VELOCITY, this._velocity.target);\n      else this._velocity.target = Math.min(VELOCITY * -1, this._velocity.target);\n    }\n\n    // lerp velocity\n    this._velocity.current = lerp(this._velocity.current, this._velocity.target, 0.2);\n\n    // update progression\n    this._progress += this._velocity.current;\n\n    // limits to [-100, 0]\n    if (this._progress < -100) this._progress = this._progress + 100;\n    else if (this._progress > 0) this._progress = this._progress - 100;\n\n    // apply transformations if inView\n    if( this._inView ) this.texts.forEach(text => (text.style.transform = `translate3d(${this._progress}%, 0, 0)`));\n  }\n  _onScrollStart() {\n    this._wheel?.on();\n    this._raf = requestAnimationFrame(this._onRaf);\n  }\n  _onScrollStop() {\n    this._wheel?.off();\n\n    if (this._raf) cancelAnimationFrame(this._raf);\n    this._raf = null;\n  }\n  _onScrollCall(direction, obj) {\n    // if scroll call is not related to this element, do nothing\n    if( obj.el !== this.el ) return;\n\n    // update inView status\n    this._inView = direction === 'enter';\n  }\n  _onResize() {\n    const elRect = rect(this.el);\n    const textRect = rect(this.template);\n\n    // if one of the two elements rect is null, do nothing\n    if( elRect.width < 1 || textRect.width < 1 ) return;\n\n    const quantity = Math.ceil(elRect.width / textRect.width) + 1;\n\n    while( this.texts.length < quantity ) {\n      const copy = this.template.cloneNode(true);\n            copy.setAttribute('aria-hidden', true);\n            copy.style.setProperty('--ticker-index', this.texts.length);\n\n      this.texts.push(copy);\n      this.el.appendChild(copy);\n    }\n  }\n\n  _getDirection() {\n    if( this.el.classList.contains('--direction-left') ) return DIRECTION_LEFT;\n    else if( this.el.classList.contains('--direction-both') ) return DIRECTION_BOTH;\n    else if( this.el.classList.contains('--direction-right') ) return DIRECTION_RIGHT;\n  }\n  _getMode() {\n    if( mobile ) return MODE_CSS;\n\n    switch( this.el.dataset.textTicker ){\n      case MODE_CSS: return MODE_CSS;\n      case MODE_SCROLL: return MODE_SCROLL;\n      default: return MODE_JS;\n    }\n  }\n}\n\nexport default TextTicker;\n","import Factory from \"./factory\";\n\nexport const instance = new Factory();\n\nexport default { instance };\n","import { $$ } from \"@utils/dom\";\n\nimport Module from \"../module/Module\";\nimport TextTicker from \"./TextTicker\";\n\nexport const SELECTOR = `[data-text-ticker]`;\n\nclass Factory extends Module {\n  constructor(init = false) {\n    super();\n\n    this.initialized = false;\n    this.items = null;\n\n    init ? this.init() : null;\n  }\n\n  get name() {\n    return \"TextTicker\";\n  }\n\n  init() {\n    // set initialized\n    this.initialized = true;\n    this.items = [...$$(SELECTOR)].map(el => new TextTicker(el, this.emitter));\n  }\n  destroy() {\n    if (this.items) this.items.forEach(el => el.destroy());\n\n    this.initialized = false;\n    this.items = null;\n  }\n}\n\nexport default Factory;\n","/*\n\n──────────────────────────────────────────\n──────────────────────────────────────────\nRESIZE & ORIENTATION\n──────────────────────────────────────────\n──────────────────────────────────────────\n\nconst ro = ResizeOrientation(resize, 100, true);\n\nro.on();  // start listening to window's resize & orientation change events\nro.off(); // stop listening to window's resize & orientation change events\nro.run(); // execute object callback\n\nfunction resize(event) {\n  // do something\n}\n\n*/\n\nimport { on, off } from \"./listener\";\nimport Throttle from \"./throttle\";\n\nconst ResizeOrientation = (cb, delay = 200, onlyAtEnd = false) => {\n  // PRIVATE API\n  const gRaf = () => {\n    if (!tick) {\n      requestAnimationFrame(_run);\n      tick = true;\n    }\n  };\n  const getThrottle = (e) => {\n    event = e;\n    throttle.init();\n  };\n\n  let tick, event;\n  const throttle = Throttle({\n    cb: gRaf,\n    delay,\n    onlyAtEnd\n  });\n\n  // PUBLIC API\n  const _on = () => {\n    on(window, \"orientationchange\", getThrottle);\n    on(window, \"resize\", getThrottle);\n  };\n  const _off = () => {\n    off(window, \"orientationchange\", getThrottle);\n    off(window, \"resize\", getThrottle);\n  };\n  const _run = () => {\n    cb(event);\n    tick = false;\n  };\n  const _dispose = () => {\n    throttle.dispose();\n    tick = true;\n  };\n\n  const ctx = {\n    dispose: _dispose,\n    on: _on,\n    off: _off,\n    run: _run\n  };\n\n  return ctx;\n};\n\nexport default ResizeOrientation;\n","/*\n\n──────────────────────────────────────────\n──────────────────────────────────────────\nTHROTTLE\n──────────────────────────────────────────\n──────────────────────────────────────────\n\n►►►  firstTime for window resizer\n\nconst throttle = new S.Throttle({\n    cb: callback,\n    delay: 200\n    onlyAtEnd: true\n})\n\nthrottle.init()\n\n*/\n\nconst Throttle = (options = { delay: 200, onlyAtEnd: false }) => {\n  const { delay, cb, onlyAtEnd } = options;\n  let last, timer;\n\n  const init = () => {\n    let firstTime = true,\n      now = Date.now();\n\n    if ((last && now < last + delay) || firstTime) {\n      firstTime = false;\n      clearTimeout(timer);\n\n      timer = setTimeout(function () {\n        last = now;\n        cb();\n      }, delay);\n    } else {\n      last = now;\n\n      if (!onlyAtEnd) {\n        firstTime = false;\n        cb();\n      }\n    }\n  };\n  const dispose = () => {\n    if (timer) clearTimeout(timer);\n    timer = null;\n  };\n\n  const ctx = {\n    init,\n    dispose\n  };\n\n  return ctx;\n};\n\nexport default Throttle;\n"],"names":["Module","init","start","stop","destroy","name","lerp","s","e","m","cb","event","delta","tick","gRaf","cancelable","preventDefault","requestAnimationFrame","_run","getCb","eType","type","wheelDeltaY","deltaY","wheelDelta","on","document","off","VELOCITY","MODE_CSS","MODE_JS","MODE_SCROLL","TextTicker","el","emitter","this","template","$","texts","_mode","_getMode","_direction","_getDirection","_velocity","target","current","_progress","_raf","_wheel","_ro","_inView","_onScroll","bind","_onRaf","_onScrollStart","_onScrollStop","_onScrollCall","_onResize","ResizeOrientation","run","classList","add","Wheel","hasAttribute","_bindEvents","_unbindEvents","dispose","cancelAnimationFrame","Math","abs","max","min","forEach","text","style","transform","direction","obj","elRect","rect","textRect","width","quantity","ceil","length","copy","cloneNode","setAttribute","setProperty","push","appendChild","contains","mobile","dataset","textTicker","instance","Factory","initialized","items","$$","map","delay","onlyAtEnd","getThrottle","throttle","Throttle","_on","window","_off","_dispose","ctx","last","timer","options","firstTime","now","Date","clearTimeout","setTimeout"],"sourceRoot":""}