{"version":3,"file":"js/src_js_modules_accordions_index_js.f4dff7719d8d36c89e92.bundle.js","mappings":"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","sources":["webpack://samuelpasquier/./src/js/components/Accordion.js","webpack://samuelpasquier/./src/js/modules/accordions/Accordions.js","webpack://samuelpasquier/./src/js/modules/accordions/index.js","webpack://samuelpasquier/./src/js/modules/accordions/factory.js","webpack://samuelpasquier/./src/js/modules/module/Module.js"],"sourcesContent":["import EventEmitter2 from \"eventemitter2\";\n\nimport { on, off } from \"@utils/listener\";\n\nclass Accordion extends EventEmitter2 {\n  constructor(button, panel, closeOnTapOut = false) {\n    super();\n\n    this.button = button;\n    this.panel = panel;\n\n    this._toggled = this.button.getAttribute(\"aria-expanded\") == 'true';\n    this._closeOnTapOut = closeOnTapOut;\n\n    this._onClick = this._onClick.bind(this);\n    this._onClickPanel = this._onClickPanel.bind(this);\n    this._onClickOutside = this._onClickOutside.bind(this);\n\n    this.init();\n  }\n\n  init() {\n    this._bindEvents();\n  }\n  destroy() {\n    this._unbindEvents();\n\n    this.button = null;\n    this.panel = null;\n\n    this._toggled = null;\n    this._closeOnTapOut = null;\n\n    this._onClick = null;\n    this._onClickPanel = null;\n    this._onClickOutside = null;\n  }\n  open(silent = false) {\n    if (this._toggled === true) return;\n    this._toggled = true;\n\n    this.button.setAttribute(\"aria-expanded\", true);\n    this.panel.setAttribute(\"aria-hidden\", false);\n\n    if (this._closeOnTapOut) window.addEventListener(\"click\", this._onClickOutside);\n\n    if (!silent) this.emit(\"open\", this);\n  }\n  close(silent = false) {\n    if (this._toggled === false) return;\n    this._toggled = false;\n\n    if (this._closeOnTapOut) window.removeEventListener(\"click\", this._onClickOutside);\n\n    this.button.setAttribute(\"aria-expanded\", false);\n    this.panel.setAttribute(\"aria-hidden\", true);\n\n    if (!silent) this.emit(\"close\", this);\n  }\n  toggle() {\n    if (this._toggled === true) this.close();\n    else this.open();\n  }\n\n  _bindEvents() {\n    if (this.button) on(this.button, \"click\", this._onClick);\n    if (this.panel) on(this.panel, \"click\", this._onClickPanel);\n  }\n  _unbindEvents() {\n    if (this.button) off(this.button, \"click\", this._onClick);\n    if (this.panel) off(this.panel, \"click\", this._onClickPanel);\n    if (this._closeOnTapOut) window.removeEventListener(\"click\", this._onClickOutside);\n  }\n\n  _onClick(event) {\n    if (event) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    }\n\n    this.toggle();\n  }\n  _onClickPanel(event) {\n    if (event) {\n      event.stopImmediatePropagation();\n    }\n  }\n  _onClickOutside() {\n    this.close();\n  }\n\n  // getter\n  get toggled() {\n    return this._toggled;\n  }\n}\n\nexport default Accordion;\n","import Accordion from '@components/Accordion';\nimport { $, $$ } from '@utils/dom';\n\nclass Accordions {\n  constructor(el, emitter) {\n    this.el = el;\n    this.emitter = emitter;\n    this.accordions = [ ...$$('.accordions__accordion', this.el) ].map(accordion => {\n      const btn = $('.accordions__btn', accordion);\n      const panel = $('.accordions__content', accordion);\n\n      return new Accordion(btn, panel);\n    });\n\n    this._onAccordionOpen = this._onAccordionOpen.bind(this);\n    this._onAccordionClose = this._onAccordionClose.bind(this);\n\n    this.init();\n  }\n\n  init() {}\n  destroy() {\n    if( this.accordions ) this.accordions.forEach(accordion => accordion.destroy());\n\n    this.el = null;\n    this.emitter = null;\n    this.accordions = null;\n\n    this._onAccordionOpen = null;\n    this._onAccordionClose = null;\n  }\n\n  start() { this._bindEvents(); }\n  stop() { this._unbindEvents(); }\n\n  _bindEvents() {\n    if( this.accordions ) {\n      this.accordions.forEach(accordion => {\n        accordion.on('open', this._onAccordionOpen);\n        accordion.on('close', this._onAccordionClose);\n      });\n    }\n  }\n  _unbindEvents() {\n    if( this.accordions ) {\n      this.accordions.forEach(accordion => {\n        accordion.off('open', this._onAccordionOpen);\n        accordion.off('close', this._onAccordionClose);\n      });\n    }\n  }\n\n  _onAccordionOpen() {\n    this.emitter.emit('SiteScroll.update');\n  }\n  _onAccordionClose() {\n    this.emitter.emit('SiteScroll.update');\n  }\n}\n\nexport default Accordions;\n","import Factory from \"./factory\";\n\nexport const instance = new Factory();\n\nexport default { instance };\n","import { $$ } from \"@utils/dom\";\n\nimport Module from \"../module/Module\";\nimport Accordions from \"./Accordions\";\n\nexport const SELECTOR = `[data-accordions]`;\n\nclass Factory extends Module {\n  constructor(init = false) {\n    super();\n\n    this.initialized = false;\n    this.items = null;\n\n    init ? this.init() : null;\n  }\n\n  get name() {\n    return \"Accordions\";\n  }\n\n  init() {\n    // set initialized\n    this.initialized = true;\n    this.items = [...$$(SELECTOR)].map(el => new Accordions(el, this.emitter));\n  }\n  destroy() {\n    if (this.items) this.items.forEach(el => el.destroy());\n\n    this.initialized = false;\n    this.items = null;\n  }\n\n  start() {\n    if (this.items) this.items.forEach(el => el.start());\n  }\n  stop() {\n    if (this.items) this.items.forEach(el => el.stop());\n  }\n}\n\nexport default Factory;\n","class Module {\n  init() {}\n\n  // called during Barba's afterEnter hook.\n  start() {}\n\n  // called during Barba's beforeLeave hook.\n  stop() {}\n\n  // called during Barba's afterLeave hook.\n  destroy() {}\n\n  // getter - setter\n  get name() {\n    return null;\n  }\n}\n\nexport default Module;\n"],"names":["Accordion","button","panel","closeOnTapOut","_toggled","getAttribute","_closeOnTapOut","_onClick","bind","_onClickPanel","_onClickOutside","init","this","_bindEvents","destroy","_unbindEvents","open","silent","setAttribute","window","addEventListener","emit","close","removeEventListener","toggle","on","off","event","preventDefault","stopImmediatePropagation","toggled","EventEmitter2","Accordions","el","emitter","accordions","$$","map","accordion","btn","$","_onAccordionOpen","_onAccordionClose","forEach","start","stop","instance","Factory","initialized","items","name","Module"],"sourceRoot":""}