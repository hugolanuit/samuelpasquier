{"version":3,"file":"js/src_js_ui_gform_index_js.bb3a11a09455adca237a.bundle.js","mappings":"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","sources":["webpack://samuelpasquier/./src/js/modules/module/Module.js","webpack://samuelpasquier/./src/js/components/GForm.js","webpack://samuelpasquier/./src/js/ui/gform/GForm.js","webpack://samuelpasquier/./src/js/ui/gform/index.js","webpack://samuelpasquier/./src/js/ui/gform/factory.js"],"sourcesContent":["class Module {\n  init() {}\n\n  // called during Barba's afterEnter hook.\n  start() {}\n\n  // called during Barba's beforeLeave hook.\n  stop() {}\n\n  // called during Barba's afterLeave hook.\n  destroy() {}\n\n  // getter - setter\n  get name() {\n    return null;\n  }\n}\n\nexport default Module;\n","/* eslint-disable no-undef */\nimport EventEmitter2 from \"eventemitter2\";\n\nimport { $, $$ } from \"@utils/dom\";\nimport { on, off } from \"@utils/listener\";\n\nconst CLASSNAME = \"--filled\";\nconst SUBMIT_SELECTOR = \".gsubmit\";\nconst SUBMITING_CLASSNAME = \"--submitting\";\n\nclass GForm extends EventEmitter2 {\n  constructor(el) {\n    super();\n\n    this.el = el;\n    this.id = parseInt(this.el.id.replace(\"gform_wrapper_\", \"\"));\n\n    this._onRender = this._onRender.bind(this);\n    this._onSubmit = this._onSubmit.bind(this);\n\n    this.reset();\n    this.init();\n  }\n\n  init() {\n    jQuery(document).on(\"gform_post_render\", this._onRender);\n  }\n\n  destroy() {\n    jQuery(document).off(\"gform_post_render\", this._onRender);\n    if (this.fields) this.fields.forEach((field) => field.destroy());\n\n    this.el = null;\n    this.id = null;\n    this.form = null;\n    this.body = null;\n    this.submit = null;\n    this.fields = null;\n\n    this._onRender = null;\n    this._onSubmit = null;\n  }\n\n  reset() {\n    if (this.fields) this.fields.forEach((field) => field.destroy());\n    if (this.submit) off(this.submit, \"click\", null);\n\n    this.form = $(\"form\", this.el);\n    this.body = $(\".gform_body\", this.el);\n    this.submit = $(SUBMIT_SELECTOR, this.el);\n    this.fields = [...$$(\".gfield\", this.body)].map((field) => new GFormField(field));\n\n    // add viewport detection on main element\n    this.el.setAttribute('data-scroll', '1');\n\n    if (this.submit) on(this.submit, \"click\", this._onSubmit);\n  }\n\n  _onRender(event, formId) {\n    if (formId !== this.id) return;\n\n    this.el.classList.remove(SUBMITING_CLASSNAME);\n\n    this.reset();\n    this.emit(\"resize\");\n\n    window.dispatchEvent(new Event(\"resize\"));\n  }\n  _onSubmit() {\n    this.el.classList.add(SUBMITING_CLASSNAME);\n  }\n}\n\nconst INPUT_SELECTOR =\n  'input:not([type=\"radio\"]):not([type=\"checkbox\"]):not([type=\"submit\"]):not([type=\"image\"]):not([type=\"file\"]):not([type=\"hidden\"])';\nconst TEXTAREA_SELECTOR = \"textarea\";\nconst SELECT_SELECTOR = \"select\";\n\nclass GFormField {\n  constructor(el) {\n    this.el = el;\n    this.label = $(\".gfield_label\", this.el);\n    this.inputContainer = $(\".ginput_container\", this.el);\n    this.parentContainer = this.inputContainer.parentElement;\n    this.input = this._getInput();\n    this.type = this._getType();\n\n    this._onInputFocus = this._onInputFocus.bind(this);\n    this._onInputBlur = this._onInputBlur.bind(this);\n\n    this.init();\n  }\n\n  init() {\n    if (this.input) {\n      this.input.on(\"focus\", this._onInputFocus);\n      this.input.on(\"blur\", this._onInputBlur);\n\n      // set input type on parentContainer\n      if(this.parentContainer)  this.parentContainer.classList.add(`--${this.type}`);\n\n      const value = this.input.value.trim();\n      if (value) this._onInputFocus();\n    }\n  }\n  destroy() {\n    if (this.input) {\n      this.input.off(\"focus\", this._onInputFocus);\n      this.input.off(\"blur\", this._onInputBlur);\n      this.input.destroy();\n    }\n\n    this.el = null;\n    this.label = null;\n    this.inputContainer = null;\n    this.input = null;\n\n    this._onInputFocus = null;\n    this._onInputBlur = null;\n  }\n\n  _onInputFocus() {\n    this.el.classList.add(CLASSNAME);\n  }\n  _onInputBlur() {\n    // check if input is empty\n    if (this.input) {\n      const value = this.input.value.trim();\n      if (value) return;\n    }\n\n    this.el.classList.remove(CLASSNAME);\n  }\n\n  _getInput() {\n    if( !this.inputContainer) return null;\n\n    const textarea = $(TEXTAREA_SELECTOR, this.inputContainer);\n    if (textarea) return new GFieldTextArea(textarea);\n\n    const select = $(SELECT_SELECTOR, this.inputContainer);\n    if (select) return new GFieldSelect(select);\n\n    const input = $(INPUT_SELECTOR, this.inputContainer);\n    if (input) return new GFieldInput(input);\n\n    return null;\n  }\n\n  _getType() {\n    if( !this.input) return null;\n\n    const type = this.input.el.getAttribute('type');\n    const tagName = this.input.el.tagName.toLowerCase();\n\n    return type ? type : tagName;\n  }\n\n}\n\nclass GFieldInput extends EventEmitter2 {\n  constructor(el) {\n    super();\n\n    this.el = el;\n\n    this._onFocus = this._onFocus.bind(this);\n    this._onBlur = this._onBlur.bind(this);\n\n    this.init();\n  }\n\n  init() {\n    this._bindEvents();\n  }\n  destroy() {\n    this._unbindEvents();\n\n    this.el = null;\n\n    this._onFocus = null;\n    this._onBlur = null;\n  }\n\n  _bindEvents() {\n    on(this.el, \"focus\", this._onFocus);\n    on(this.el, \"blur\", this._onBlur);\n  }\n  _unbindEvents() {\n    off(this.el, \"focus\", this._onFocus);\n    off(this.el, \"blur\", this._onBlur);\n  }\n\n  _onFocus() {\n    this.emit(\"focus\", this);\n  }\n  _onBlur() {\n    this.emit(\"blur\", this);\n  }\n\n  // getter\n  get value() {\n    return this.el.value;\n  }\n}\n\nclass GFieldTextArea extends GFieldInput {\n  init() {\n    this.el.setAttribute(\"rows\", 1);\n    this.el.removeAttribute(\"cols\");\n\n    this._currentHeight = null;\n    this._onInput = this._onInput.bind(this);\n\n    super.init();\n    this.update();\n  }\n  destroy() {\n    this._currentHeight = null;\n    this._onInput = null;\n\n    super.destroy();\n  }\n  update() {\n    if (!this.el) return;\n\n    // Reset height\n    this.el.style.height = \"inherit\";\n\n    // Calculate the height\n    const height = this.el.scrollHeight;\n\n    // if height has changed from previous value (except for initial update)\n    if (this._currentHeight !== height && this._currentHeight !== null) {\n      this.emit(\"resize\", this);\n      window.dispatchEvent(new Event(\"resize\"));\n    }\n\n    this._currentHeight = height;\n    this.el.style.height = `${this._currentHeight}px`;\n  }\n\n  _bindEvents() {\n    super._bindEvents();\n    on(this.el, \"input\", this._onInput);\n  }\n  _unbindEvents() {\n    super._unbindEvents();\n    off(this.el, \"input\", this._onInput);\n  }\n\n  _onInput() {\n    this.update();\n  }\n}\n\n// for future use\nclass GFieldSelect extends GFieldInput {}\n\nexport default GForm;\n","import GForm from \"@components/GForm\";\n\nclass Gform {\n  constructor(el) {\n    this.el = el;\n    this.gform = null;\n\n    this.init();\n  }\n\n  init() {\n    this.gform = new GForm(this.el);\n  }\n  destroy() {\n    if (this.gform) this.gform.destroy();\n\n    this.el = null;\n    this.gform_wrapper = null;\n    this.gform = null;\n  }\n}\n\nexport default Gform;\n","import Factory from \"./factory\";\n\nexport const instance = new Factory();\n\nexport default { instance };\n","import { $$ } from \"@utils/dom\";\n\nimport Module from \"@modules/module/Module\";\nimport Gform from \"./GForm\";\n\nexport const SELECTOR = `.gform_wrapper`;\nclass Factory extends Module {\n  constructor(init = false) {\n    super();\n\n    this.initialized = false;\n    this.items = null;\n\n    init ? this.init() : null;\n  }\n\n  get name() {\n    return \"Gform\";\n  }\n\n  init() {\n    // set initialized\n    this.initialized = true;\n    this.items = [...$$(SELECTOR)].map(el => new Gform(el, this.emitter));\n  }\n\n  destroy() {\n    if (this.items) this.items.forEach(el => el.destroy());\n\n    this.initialized = false;\n    this.items = null;\n  }\n}\n\nexport default Factory;\n"],"names":["Module","init","start","stop","destroy","name","CLASSNAME","SUBMITING_CLASSNAME","GForm","el","id","parseInt","replace","_onRender","bind","_onSubmit","reset","jQuery","document","on","this","off","fields","forEach","field","form","body","submit","$","$$","map","GFormField","setAttribute","event","formId","classList","remove","emit","window","dispatchEvent","Event","add","EventEmitter2","label","inputContainer","parentContainer","parentElement","input","_getInput","type","_getType","_onInputFocus","_onInputBlur","value","trim","textarea","GFieldTextArea","select","GFieldSelect","GFieldInput","getAttribute","tagName","toLowerCase","_onFocus","_onBlur","_bindEvents","_unbindEvents","removeAttribute","_currentHeight","_onInput","update","style","height","scrollHeight","Gform","gform","gform_wrapper","instance","Factory","initialized","items","emitter"],"sourceRoot":""}